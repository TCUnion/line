# LINE Rich Menu ç®¡ç†å·¥å…·

åŸºæ–¼ [LINE Messaging API](https://developers.line.biz/en/docs/messaging-api/using-rich-menus/) çš„ Rich Menu å…¨åŠŸèƒ½ç®¡ç†å·¥å…·ï¼Œæä¾› **CLI äº’å‹•å¼å·¥å…·**ã€**Web UI ç®¡ç†ä»‹é¢** ä»¥åŠ **n8n æ•´åˆæ–¹æ¡ˆ**ã€‚

## âœ¨ åŠŸèƒ½ç‰¹è‰²

- ğŸ“‹ **æŸ¥è©¢åŠŸèƒ½** â€” åˆ—å‡ºæ‰€æœ‰ Rich Menuï¼ˆIDã€åç¨±ã€å°ºå¯¸ã€å€åŸŸæ•¸ï¼‰
- â• **å»ºç«‹é¸å–®** â€” 6 ç¨®å…§å»ºæ¨¡æ¿ + è‡ªè¨‚ JSON æ”¯æ´
- ğŸ–¼ï¸ **åœ–ç‰‡ä¸Šå‚³** â€” æ”¯æ´ PNG/JPEGï¼Œè‡ªå‹•åµæ¸¬ MIME é¡å‹ï¼Œå«æ‹–æ‹‰ä¸Šå‚³
- ğŸ‘¤ **ä½¿ç”¨è€…ç¶å®š** â€” å€‹åˆ¥ç¶å®š / æ‰¹é‡ç¶å®š / è§£é™¤ç¶å®š
- â­ **é è¨­é¸å–®** â€” è¨­å®š / å–æ¶ˆå…¨åŸŸé è¨­é¸å–®
- ğŸ”— **åˆ¥åç®¡ç†** â€” æ­é… `richmenuswitch` å¯¦ç¾å¤šå±¤é¸å–®æ›é 
- â™»ï¸ **éŒ¯èª¤è™•ç†** â€” å®Œæ•´ HTTP ç‹€æ…‹ç¢¼è™•ç†ã€429 è‡ªå‹•é‡è©¦
- ğŸ”§ **n8n æ•´åˆ** â€” æ‰€æœ‰æ“ä½œçš„ HTTP Request Node è¨­å®šæ–‡ä»¶

## ğŸš€ å¿«é€Ÿé–‹å§‹

### å®‰è£

```bash
# è¤‡è£½å°ˆæ¡ˆ
git clone https://github.com/TCUnion/line.git
cd line

# å®‰è£ä¾è³´
npm install

# è¨­å®šç’°å¢ƒè®Šæ•¸
cp .env.example .env
# ç·¨è¼¯ .envï¼Œå¡«å…¥ä½ çš„ Channel Access Token
```

### å–å¾— Channel Access Token

1. å‰å¾€ [LINE Developers Console](https://developers.line.biz/console/)
2. é¸æ“‡ä½ çš„ Provider â†’ Channel
3. åœ¨ **Messaging API** æ¨™ç±¤é ä¸­ï¼Œæ‰¾åˆ° **Channel access token** ä¸¦ç”¢ç”Ÿ

### ä½¿ç”¨ CLI å·¥å…·

```bash
npm run cli
```

CLI æä¾›äº’å‹•å¼é¸å–®ï¼Œå¯åŸ·è¡Œæ‰€æœ‰ Rich Menu æ“ä½œï¼š

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘    LINE Rich Menu ç®¡ç†å·¥å…· v1.0.0       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

? è«‹é¸æ“‡æ“ä½œï¼š
  â”€â”€ é¸å–®ç®¡ç† â”€â”€
  ğŸ“‹ åˆ—å‡ºæ‰€æœ‰ Rich Menu
  â• å¾æ¨¡æ¿å»ºç«‹ Rich Menu
  ğŸ“ å¾ JSON æª”æ¡ˆå»ºç«‹ Rich Menu
  ğŸ—‘ï¸  åˆªé™¤ Rich Menu
  â”€â”€ åœ–ç‰‡èˆ‡è¨­å®š â”€â”€
  ğŸ–¼ï¸  ä¸Šå‚³é¸å–®åœ–ç‰‡
  â­ è¨­å®šé è¨­é¸å–®
  ...
```

### ä½¿ç”¨ Web UI

```bash
npm run dev
```

é–‹å•Ÿç€è¦½å™¨å‰å¾€ `http://localhost:3000`ï¼Œå³å¯ä½¿ç”¨åœ–å½¢åŒ–ç®¡ç†ä»‹é¢ã€‚

## ğŸ“ å…§å»ºæ¨¡æ¿

| æ¨¡æ¿ | å°ºå¯¸ | å€åŸŸæ•¸ | èªªæ˜ |
|------|------|--------|------|
| å…¨ç‰ˆå–®å€ | 2500Ã—1686 | 1 | æ•´å€‹é¸å–®ç‚ºä¸€å€‹é»æ“Šå€åŸŸ |
| å·¦å³é›™åˆ†å‰² | 2500Ã—1686 | 2 | å·¦å³å„ä¸€å€‹å€åŸŸ |
| ä¸‰æ¬„åˆ†å‰² | 2500Ã—1686 | 3 | å·¦å¤§å³ä¸Šå³ä¸‹ï¼ˆå®˜æ–¹ç¯„ä¾‹ï¼‰ |
| å…­å®®æ ¼ | 2500Ã—1686 | 6 | 2 è¡Œ Ã— 3 åˆ—ç­‰åˆ† |
| åŠé«˜ä¸‰æ¬„ | 2500Ã—843 | 3 | åŠé«˜ä¸‰ç­‰åˆ† |
| å¤šå±¤æ›é  | 2500Ã—1686 | - | å« richmenuswitch action |

## ğŸ”§ n8n ä½¿ç”¨è€…

è«‹åƒé–± [`n8n/rich-menu-workflows.md`](n8n/rich-menu-workflows.md)ï¼Œå…§å«æ‰€æœ‰æ“ä½œçš„ HTTP Request Node å®Œæ•´è¨­å®šåƒæ•¸ã€‚

## ğŸ“‚ å°ˆæ¡ˆçµæ§‹

```
â”œâ”€â”€ package.json                  # å°ˆæ¡ˆè¨­å®š
â”œâ”€â”€ .env.example                  # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config.js                 # ç’°å¢ƒè¨­å®šèˆ‡ Token ç®¡ç†
â”‚   â”œâ”€â”€ richMenuClient.js         # Rich Menu API æ ¸å¿ƒå°è£
â”‚   â”œâ”€â”€ cli.js                    # CLI äº’å‹•å¼å·¥å…·
â”‚   â””â”€â”€ server.js                 # Express å¾Œç«¯ä¼ºæœå™¨
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html                # Web UI ä»‹é¢
â”‚   â”œâ”€â”€ style.css                 # æš—è‰²ä¸»é¡Œæ¨£å¼
â”‚   â””â”€â”€ app.js                    # å‰ç«¯äº’å‹•é‚è¼¯
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ rich-menu-templates.json  # 6 ç¨®é¸å–®æ¨¡æ¿
â””â”€â”€ n8n/
    â””â”€â”€ rich-menu-workflows.md    # n8n è¨­å®šæ–‡ä»¶
```

## ğŸ“– API åƒè€ƒ

### Rich Menu åœ–ç‰‡è¦æ ¼

| å°ºå¯¸ (px) | æ¯”ä¾‹ | èªªæ˜ |
|-----------|------|------|
| 2500 Ã— 1686 | å…¨é«˜ | æœ€å¸¸ç”¨ï¼Œ6 å®®æ ¼æ¨è–¦ |
| 2500 Ã— 843 | åŠé«˜ | è¼•é‡é¸å–® |
| 1200 Ã— 810 | å…¨é«˜ | å°å°ºå¯¸æ›¿ä»£ |
| 1200 Ã— 405 | åŠé«˜ | å°å°ºå¯¸æ›¿ä»£ |
| 800 Ã— 540 | å…¨é«˜ | æœ€å°å°ºå¯¸ |
| 800 Ã— 270 | åŠé«˜ | æœ€å°å°ºå¯¸ |

- æ ¼å¼ï¼šPNG æˆ– JPEG
- æª”æ¡ˆå¤§å°ä¸Šé™ï¼š1MB

### Action é¡å‹

| é¡å‹ | èªªæ˜ | ç¯„ä¾‹ç”¨é€” |
|------|------|----------|
| `uri` | é–‹å•Ÿç¶²å€ | é€£çµåˆ°å¤–éƒ¨ç¶²é  |
| `message` | ç™¼é€æ–‡å­—è¨Šæ¯ | è§¸ç™¼ Bot å›è¦† |
| `postback` | ç™¼é€ Postback è³‡æ–™ | é€é Webhook è§¸ç™¼å¾Œç«¯é‚è¼¯ |
| `richmenuswitch` | åˆ‡æ› Rich Menu | å¤šå±¤é¸å–®æ›é  |
| `datetimepicker` | æ—¥æœŸé¸æ“‡å™¨ | é¸æ“‡æ—¥æœŸ/æ™‚é–“ |
| `clipboard` | è¤‡è£½åˆ°å‰ªè²¼ç°¿ | è¤‡è£½å„ªæƒ ç¢¼ |

## ğŸ“š åƒè€ƒè³‡æ–™

- [LINE Messaging API â€” Rich Menu å®˜æ–¹æ–‡ä»¶](https://developers.line.biz/en/docs/messaging-api/using-rich-menus/)
- [LINE Messaging API Reference](https://developers.line.biz/en/reference/messaging-api/)
- [æŸ”å…’æ•¸ä½ â€” LINE å¤šå±¤åœ–æ–‡é¸å–®æ•™å­¸](https://www.gentlerdigit.com/LINE-Rich-Menu)

## æˆæ¬Š

MIT License
